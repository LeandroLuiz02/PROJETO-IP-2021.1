#include "raylib.h"

typedef struct Inimigo{
    Rectangle hitbox;        //hitbox do inimigo
    bool vivo;               //Saber o estado do inimigo (vivo ou morto), precisamos do codigo da BALA. inimigo[i].vivo = vivo. !inimigo[i].vivo = morto;
    Color cor;               //Cor do inimigo (Cor de fundo para ficar invisivel)(hitbox)
} Inimigo;

Inimigo inimigo[5];

typedef struct Mouse{
    Rectangle hitbox;
} Mouse;

Mouse mouse;

int main(){
    const int screenWidth = 1920;
    const int screenLength = 1080;
    int cont = 0;
    
    InitWindow(screenWidth, screenLength, "Bola");
    SetTargetFPS(60);
    for(int i = 0; i < 5; i++){
        inimigo[i].hitbox.x = GetRandomValue(0,1920); 
        inimigo[i].hitbox.y = GetRandomValue(0,1080);
        inimigo[i].hitbox.width = 40;
        inimigo[i].hitbox.height = 40;
        inimigo[i].vivo = true;
        inimigo[i].cor = RED;
    }
    
    mouse.hitbox.width = 40;
    mouse.hitbox.height = 40;
    
    while (!WindowShouldClose())    
    {
        mouse.hitbox.x = GetMouseX();
        mouse.hitbox.y = GetMouseY();
        
        BeginDrawing();

            ClearBackground(BLACK);
    
            DrawRectangle(mouse.hitbox.x,mouse.hitbox.y,40,40,BLUE); //Botei as coordenadas do mouse por enquanto que não tem o sistema de movimentaçao polida

            for(int i = 0; i < 5; i++){
                if ((inimigo[i].vivo)){
                    DrawRectangleRec(inimigo[i].hitbox, inimigo[i].cor); //Desenha 5 quadrados em localizaçoes aleatorias, a ideia é deixar os quadrados invisiveis e
                }                                                        //botar a sprite do inimigo em cima. Preciso de ajuda pra colocar delay nos spawns se alguem souber
            
            }
            for(int i = 0; i < 5; i++){
                if (inimigo[i].vivo){
                    if(mouse.hitbox.x > inimigo[i].hitbox.x)
                        inimigo[i].hitbox.x += 1;
                    if(mouse.hitbox.x < inimigo[i].hitbox.x)
                        inimigo[i].hitbox.x -= 1; // O 1 pode ser alterado pra mudar a velocidade dos inimigos
                    if(mouse.hitbox.y > inimigo[i].hitbox.y)
                        inimigo[i].hitbox.y += 1;
                    if(mouse.hitbox.y < inimigo[i].hitbox.y)
                        inimigo[i].hitbox.y -= 1;
                }
                if ((CheckCollisionRecs(mouse.hitbox,inimigo[i].hitbox)) && (cont == 0))
                    cont++;
                if (cont > 0)
                    DrawText("Game Over",100,100,100,RED); //placeholder tela de game over tentar novamente.
                    
            }
            
        EndDrawing();

    }

    CloseWindow();

    return 0;
}
